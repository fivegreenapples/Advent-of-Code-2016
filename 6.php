<?php

/*
--- Day 6: Signals and Noise ---

Something is jamming your communications with Santa. Fortunately, your signal is only partially jammed, and protocol in situations like this is to switch to a simple repetition code to get the message through.

In this model, the same message is sent repeatedly. You've recorded the repeating message signal (your puzzle input), but the data seems quite corrupted - almost too badly to recover. Almost.

All you need to do is figure out which character is most frequent for each position. For example, suppose you had recorded the following messages:

eedadn
drvtee
eandsr
raavrd
atevrs
tsrnev
sdttsa
rasrtv
nssdts
ntnada
svetve
tesnvt
vntsnd
vrdear
dvrsen
enarar
The most common character in the first column is e; in the second, a; in the third, s, and so on. Combining these characters returns the error-corrected message, easter.

Given the recording in your puzzle input, what is the error-corrected version of the message being sent?

--- Part Two ---

Of course, that would be the message - if you hadn't agreed to use a modified repetition code instead.

In this modified code, the sender instead transmits what looks like random data, but for each character, the character they actually want to send is slightly less likely than the others. Even after signal-jamming noise, you can look at the letter distributions in each column and choose the least common letter to reconstruct the original message.

In the above example, the least common character in the first column is a; in the second, d, and so on. Repeating this process for the remaining characters produces the original message, advent.

Given the recording in your puzzle input and this new decoding methodology, what is the original message that Santa is trying to send?


*/

$TEST_INPUT = "eedadn
drvtee
eandsr
raavrd
atevrs
tsrnev
sdttsa
rasrtv
nssdts
ntnada
svetve
tesnvt
vntsnd
vrdear
dvrsen
enarar";

$INPUT = "eqvmfqnf
jvkezmqt
zcssqwlw
cuacncgg
ikmpzpoh
dzpzobdl
qlsnuhuq
fwqnoklz
cibgplfq
ktsqfcrv
vcknjnnx
upaiaprz
bpqmolbq
dflhnpnk
heqjflch
cmewgodc
aaorgxkn
plekphpw
fcofrbnm
bmnrygtb
rqsqsqio
rnlntwxa
cxjqqfyl
jxjnxchb
kfgutxmi
cbciszxd
irakoonu
pcgfnycg
fgeivexo
ujxdaehw
ejkvrych
nhlklbgr
etjuhgry
mkgkmykm
teuhrfto
juqfslbn
tbwxabzi
ngdnwsey
amcibkyo
xlvxwqpj
vdbzuvkh
gkagbzep
kqxzkeip
bxccztho
vqrywqlc
jbzhecjc
ozkulgxo
uiwbofuk
vfwhdnao
tycxucwd
jvhuljfs
xxhqhruc
upnndiiz
andxywil
lowofbqv
iroqzrry
nmkkqqjb
daijrfna
jmcstxlq
jdefvuaa
nkbmowfi
agotazda
kufoymrn
yijwfjyi
hyqvaouj
soueuhln
oomsbkmh
buadtssf
rvgpeeza
hjiymcmd
ebgivdap
xzieipbg
ttpudwqt
hndwuncw
wqypfkvf
jqxuaipm
fzwlgxxq
ddshbtya
ardlcgyi
soznvuyw
vyizuolp
ckfaxyvs
nbsjkibi
lsrkrdzp
oqoffwxa
bdugjlsm
rtcsylfd
fezoiliq
zwpaphcb
sdlouhyf
cfejwvls
xehddxku
edhrtdcv
ehouagvy
hoyxjfsj
quggpnpx
muqbijbe
rcnniddd
kzfeiaui
sywienef
xpxftuvq
dtbhnslt
mpcpkmfa
wysutlci
fmqomicz
mhshprxr
uxwfcftt
ehbonsrl
pjobilxx
chiebfox
lqfxgyqg
vupcjatm
wfljafhc
iygojeny
gqxmgneu
nhlwllak
xnkqpulv
awijbvef
pbcrrwqo
dobsejtb
dqdoapkc
hngrxdtx
dodsxysb
bmtyelak
cctuwwvt
rytlmoyr
fqnbuxdi
irrqladc
wnvtsneg
ugqqdmlj
nljnjiod
knidxxzh
dfymoqgt
fwgtjafh
fpdioivz
tqbewmti
mcqtbbee
pivfrpou
tdyguuos
eldmvvmi
oaiqnizz
fyqpxgwa
lzcxsazq
zhsoljwz
qnzafmjl
oopnnndl
cozehoor
bspuwzxm
ubtunnep
smdhpvxr
nsvxiwje
mmqcklsm
hhxaciaq
zzgoxhws
fvntouun
skxzmzyg
znptwuqu
aknwvojo
wftmjrsf
gahrordj
oegnykag
lvlqswph
qsowvoem
sjspasfp
ygjohzfd
jeuxigsi
lgxdtudx
qadlkrel
lpfxosdq
sgaoqkzr
rtlvuhfv
ftbbsgbn
kjxttiqu
gylikswu
lquhgmrs
hxrjagjm
epxxekgx
uwwlcbrx
feincdjp
uyxhfhsc
nojuykoh
psjuuqwu
gtlohqkz
sbzsbgrw
nbhwuxfb
phmtunrh
zmfbkvgv
mjumfpia
gkubcshe
jmavrhyd
cgffkftg
msurhdct
bvchukal
psxaluvg
tvgwjhhp
chyizcxv
dumebzkd
cjpzbkzk
ngrgseyn
xmwcmaaz
puyrbiup
xxkpznis
rguwrpua
jmolhvnn
kpeqtlan
zzgvoxlp
erbintcn
kcykvysv
ixildajc
tnvgihwe
iqwgozpj
txkgyflb
vsyzebrw
ehnbcjef
hfevkbhf
wihlqtmp
vmrmnygo
ulvsuvsn
wgxnwihd
lexgbpsv
kxqcjoeb
daodpsbb
azyqmyhv
mvzcatwb
jtvqkjrv
rtdsaqqd
xrhzmnzl
wgfiwjrh
hgrgqqxm
nwwcxoyq
qlqyhpzs
ovujfily
pzvyeryk
strswprn
nrxclypc
sfusjxzi
pclbdadw
sjhggndb
xjcutuyt
qjjjeytj
qqjrkdlb
pyzodjdh
brnmlkmi
lgipidfp
ttrfbjry
iidwekro
vnwlnyma
ylxatduo
eiokdbqr
laezjjte
kkjhfsvp
buaegtpg
vzgqletc
pkdseade
nvpyxokq
yiysgxpe
xqhtubam
lcstpvke
nnskqssg
mkrbdovg
camkeppm
iqjvotay
bodlfgkj
jiigwvzc
ixpghywy
qlzyjgue
ugyjqtzn
odeuuiir
yfhianfx
seewayqj
lstpeuja
paqqnxsr
guwkidny
susussgu
ezcayehr
tdzgvcqf
vckcnsio
obawbapm
ipebazzk
tmcpmiou
hpdlfwor
ygxlfzzr
ltyxhtbx
olzqonbx
grsxreqs
bvkjcoux
fxtuxuub
fcbxdenm
smilcfvz
ewbndkiz
httsnfqu
ghorvefw
anevvqir
sajdzwho
becdemdn
vxktmxsj
xyawkeuw
pdefbxmh
yejymgfr
mipvhnsc
tjdyqpzd
rbvqirmd
mscuflvd
draqqcda
xfegqcjg
auypywpb
gitgzstq
zveqbzgt
wxrpedre
haptyecu
tkeexmhe
ujijprbd
xjiyczwq
ehpygnrr
guvejwyt
zmtsftky
wqtklwiz
lwlessio
lrknmhzd
pkdkwevt
ncryoeth
hjsqtpxu
ivmqrwok
qozgijgu
ueujvbbe
nfxgrmsd
zeetrgdl
drfbcgxo
rjjeraeb
hshozlgv
sfgvrnez
zaoctlsa
hebtzqvy
qckvuyif
wxyszmev
ddxfwklt
jqlzpfvu
wimoefwx
kabvtrno
pbebkvkm
govfwjof
xfjkvoup
fuzxcese
zbavvmyy
mwvkrnjg
gtkyelff
bffyzhnt
vlffqryw
ofncqcqw
cnzzrjjj
txpzvykz
ukkgeavq
wdnieioq
avosnedk
ipaavrqp
eeuurfat
sfhhwqzw
vjzopzad
kdbjonqz
uaksjfuc
lumpaomf
ysebmwel
dobryhxj
oaymjqwh
qjfflojj
zqmfgwre
uimjngfs
ihwelccg
yetrodjy
aifvwtws
xiyruzqr
anuvhykm
lelbjsno
csjwqotd
pptsysey
joptcdmq
tghbxpmq
jduwbxiy
obcdlahg
dxwrzytc
axfrxlgz
gepnmvel
ztmcynch
otnicgga
bdzobaoe
vkljxwnm
qvhmitgh
yflyxbjn
qshihqki
debaxqpw
fhfcjogj
huwpnaxx
jpwnrjbc
waylsrcm
aurdpcqc
yanpouht
ybwbpcak
uzvvspnj
tftluckv
uwmditoa
wsndxybi
dotcxasi
lxgmptwn
bpdmcbgt
dpjqvvck
jmgwudli
rimvxcoa
vdlacqbl
qtzwuqny
olzuzuuq
grlyyegi
mhgtadti
yrfdffzj
wbxadryy
bhaniozq
jdishqcx
kmiatkjj
asmxdrmv
riqdknna
fsuetmeg
iikajhgb
ioswsaws
yygpvtfb
egjoltik
bypcbzpk
zaumpggx
sdizezlv
xoyallwy
gicvajdl
qzowhuxa
iyftbzns
srzjxhve
xwasqzay
qznuxpqj
mlnjztxf
rxkcymao
huvxpllx
fmnrqasq
mwwigmka
yovjkmou
kvdrltte
nymvepew
vnrjykzc
unoegpvv
trrejbob
zwsdnqnb
ljsztmgl
tiznomfv
zxtxholt
csufzpiw
jgbjpucz
mpakkeil
ixmbvvbi
ejkhcxjj
zaokljpl
oeocaxdv
ytlpsbcx
hpfserxf
nzregysc
etevckof
bcqkqdvb
xzdhhick
gystpgoo
ciiyzxxr
kwstdxnn
ztregxhx
qhvkjoqe
ugirgwax
nhukpdut
yfiibmmd
cwkayjcp
ebmlabrp
kvjhyrag
wbphpfkc
ucqvhibs
dwuavsyy
jwrdsobl
hytijctt
plcumjhv
hwexsihm
ppmfzgqt
moumyuiw
zvgbsabj
yraygmws
vopzuhor
hafhljwp
gmqpchdg
yyahpihs
xvqakyyp
deamarun
yunihcvw
gcdjqqmu
kctibuxy
gcvlcfhc
ydwoxfvg
epszfvuh
xjjvwpbz
gzpdnthj
mnkrjgwz
ldfwvvfq
tydqesvl
envwzaqv
xvwyzkpe
rmpgcjeo
pkupgxup
ekqizsjl
agvenhgu
vscaqtri
rwfjrjpg
imthkcta
sjpmwqmg
fptfgekn
ohbwdbjm
ccfrphaj
gyeaqkog
onybscve
qztmoant
abjnbrpd
zompdzuf
bamomvbw
kzmmgexu
wzoxohtn
wvgmvwdt
nlgkxmbu
vyoddxyf
phmrizhk
zhksysjf
atcfvzlx
iyabqkly
rnwidjpm
cgwddumw
fcoylnzw
lsxosfra
vbcdgfiw
aenlmdgh
fvtmormn
rllxkznc
asocydmo
zcltimlr
hrqmccpt
dfmlsvtz
ntuhkbws
oziqleds
wkzbguis
coapfihl
irzpsuql
uxaowrls
tdbefhcf
wsyusuph
lpbdrmyn
slrzkkms
wqvzwiyq
vinahrsd
thsnmqjr
kwrzmakz
ifhclifl
wkqahikb
rwnchlkr
rkhpdbbk
vqnzigbf
olzziafs
qcylpbtk
fzhtmgji
qvnyctmb
ouolgwup
xkbrykjx
apbamszk
mlrlmpoh
kdneakuk
rrhhrtfk
cbgzlbgz
mfxencal
bkctqwpe
rjdxhqof
ogcbntmp
bbftqdfk
kikdidvm
mnjgwven
yurxwsge
qlrdtzad
jalffvnu
tayfycwr
jhivnvaw
yuvffepz
mwhczdkv
xltzklis
iellkyqk
krpktxhh
rkawdywu
pqqitomj
nrhhtvtv
gwerzhwc
qlsgifir
ssvyspem
udnnmvxk
albkdbsh
obxcrucu
dnyytrcx";


function run($signal) {

	$frequencyByPosition = [];
	$messages = explode("\n", $signal);
	foreach($messages as $message) {
		foreach(str_split($message) as $i => $char) {

			if (!isset($frequencyByPosition[$i])) {
				$frequencyByPosition[$i] = [];
			}
			if (!isset($frequencyByPosition[$i][$char])) {
				$frequencyByPosition[$i][$char] = 0;
			}

			$frequencyByPosition[$i][$char] += 1;

		}
	}

	$correctedMessage = "";
	foreach($frequencyByPosition as $pos => $chars) {
		// arsort($chars);                                               // PART 1
		asort($chars);                                                // PART 2
		$correctedMessage .= key($chars); 
	}

	echo "\n\nMessage is: ".$correctedMessage."\n\n";
}

run($INPUT);